/**
 *  naken_asm assembler.
 *  Author: Michael Kohn
 *   Email: mike@mikekohn.net
 *     Web: http://www.mikekohn.net/
 * License: GPLv3
 *
 * Copyright 2010-2021 by Michael Kohn
 *
 */

#include <stdio.h>
#include <stdlib.h>
#include "table/8048.h"

struct _table_8048 table_8048[] =
{
  { "add",   0x68, 0xf8, 2, OP_A,     OP_RR,     1, 0 },
  { "add",   0x60, 0xfe, 2, OP_A,     OP_AT_R,   1, 0 },
  { "add",   0x03, 0xff, 2, OP_A,     OP_NUM,    2, 0 },
  { "addc",  0x78, 0xf8, 2, OP_A,     OP_RR,     1, 0 },
  { "addc",  0x70, 0xfe, 2, OP_A,     OP_AT_R,   1, 0 },
  { "addc",  0x13, 0xff, 2, OP_A,     OP_NUM,    2, 0 },
  { "anl",   0x58, 0xf8, 2, OP_A,     OP_RR,     1, 0 },
  { "anl",   0x50, 0xfe, 2, OP_A,     OP_AT_R,   1, 0 },
  { "anl",   0x53, 0xff, 2, OP_A,     OP_NUM,    2, 0 },
  { "anl",   0x98, 0xfc, 2, OP_P12,   OP_NUM,    2, FLAG_8048 },
  { "anl",   0x73, 0xff, 2, OP_PORT,  OP_NUM,    2, FLAG_NS405 },
  { "anld",  0x9c, 0xfc, 2, OP_PP,    OP_A,      2, FLAG_8041 | FLAG_8048 },
  { "call",  0x14, 0x1f, 1, OP_ADDR,  OP_NONE,   2, 0 },
  { "clr",   0x27, 0xff, 1, OP_A,     OP_NONE,   1, 0 },
  { "clr",   0x97, 0xff, 1, OP_C,     OP_NONE,   1, 0 },
  { "clr",   0x85, 0xff, 1, OP_F0,    OP_NONE,   1, 0 },
  { "clr",   0xa5, 0xff, 1, OP_F1,    OP_NONE,   1, 0 },
  { "cpl",   0x37, 0xff, 1, OP_A,     OP_NONE,   1, 0 },
  { "cpl",   0xa7, 0xff, 1, OP_C,     OP_NONE,   1, 0 },
  { "cpl",   0x95, 0xff, 1, OP_F0,    OP_NONE,   1, 0 },
  { "cpl",   0xb5, 0xff, 1, OP_F1,    OP_NONE,   1, 0 },
  { "da",    0x57, 0xff, 1, OP_A,     OP_NONE,   1, 0 },
  { "dec",   0x07, 0xff, 1, OP_A,     OP_NONE,   1, 0 },
  { "dec",   0x0a, 0xff, 1, OP_CURS,  OP_NONE,   1, FLAG_NS405 },
  { "dec",   0xc8, 0xf8, 1, OP_RR,    OP_NONE,   1, 0 },
  { "decl",  0x08, 0xfe, 1, OP_RR,    OP_NONE,   1, FLAG_NS405 },
  { "dis",   0x15, 0xff, 1, OP_I,     OP_NONE,   1, FLAG_8041 | FLAG_8048 },
  { "dis",   0x35, 0xff, 1, OP_II,    OP_NONE,   1, FLAG_NS405 },
  { "dis",   0x15, 0xff, 1, OP_XI,    OP_NONE,   1, FLAG_NS405 },
  { "dis",   0x35, 0xff, 1, OP_TCNTI, OP_NONE,   1, FLAG_8041 | FLAG_8048 },
  { "djnz",  0xe8, 0xf8, 2, OP_RR,    OP_PADDR,  2, 0 },
  { "en",    0x05, 0xff, 1, OP_I,     OP_NONE,   1, FLAG_8041 | FLAG_8048 },
  { "en",    0x25, 0xff, 1, OP_II,    OP_NONE,   1, FLAG_NS405 },
  { "en",    0x05, 0xff, 1, OP_XI,    OP_NONE,   1, FLAG_NS405 },
  { "en",    0x25, 0xff, 1, OP_TCNTI, OP_NONE,   1, FLAG_8041 | FLAG_8048 },
  { "en",    0xe5, 0xff, 1, OP_DMA,   OP_NONE,   1, FLAG_8041 },
  { "en",    0xf5, 0xff, 1, OP_FLAGS, OP_NONE,   1, FLAG_8041 },
  { "ent0",  0x75, 0xff, 1, OP_CLK,   OP_NONE,   1, FLAG_8048 },
  { "in",    0x08, 0xfc, 2, OP_A,     OP_P03,    2, FLAG_8041 | FLAG_8048 },
  { "in",    0x22, 0xff, 2, OP_A,     OP_DBB,    2, FLAG_8041 },
  { "in",    0xe1, 0xff, 1, OP_PORT,  OP_NONE,   2, FLAG_NS405 },
  { "in",    0xe0, 0xff, 1, OP_RCVR,  OP_NONE,   2, FLAG_NS405 },
  { "inc",   0x17, 0xff, 1, OP_A,     OP_NONE,   1, 0 },
  { "inc",   0x3a, 0xff, 1, OP_CURS,  OP_NONE,   1, FLAG_NS405 },
  { "inc",   0x18, 0xf8, 1, OP_RR,    OP_NONE,   1, 0 },
  { "inc",   0x10, 0xfe, 1, OP_AT_R,  OP_NONE,   1, 0 },
  { "incl",  0x38, 0xfe, 1, OP_RR,    OP_NONE,   1, FLAG_NS405 },
  { "ins",   0x08, 0xff, 2, OP_A,     OP_BUS,    2, FLAG_8048 },
  { "jb0",   0x12, 0xff, 1, OP_PADDR, OP_NONE,   2, 0 },
  { "jb1",   0x32, 0xff, 1, OP_PADDR, OP_NONE,   2, 0 },
  { "jb2",   0x52, 0xff, 1, OP_PADDR, OP_NONE,   2, 0 },
  { "jb3",   0x72, 0xff, 1, OP_PADDR, OP_NONE,   2, 0 },
  { "jb4",   0x92, 0xff, 1, OP_PADDR, OP_NONE,   2, 0 },
  { "jb5",   0xb2, 0xff, 1, OP_PADDR, OP_NONE,   2, 0 },
  { "jb6",   0xd2, 0xff, 1, OP_PADDR, OP_NONE,   2, 0 },
  { "jb7",   0xf2, 0xff, 1, OP_PADDR, OP_NONE,   2, 0 },
  { "jc",    0xf6, 0xff, 1, OP_PADDR, OP_NONE,   2, 0 },
  { "jf0",   0xb6, 0xff, 1, OP_PADDR, OP_NONE,   2, FLAG_8041 | FLAG_8048 },
  { "jf0",   0x96, 0xff, 1, OP_PADDR, OP_NONE,   2, FLAG_NS405 },
  { "jf1",   0x76, 0xff, 1, OP_PADDR, OP_NONE,   2, 0 },
  { "jmp",   0x04, 0x1f, 1, OP_ADDR,  OP_NONE,   2, 0 },
  { "jmpp",  0xb3, 0xff, 1, OP_AT_A,  OP_NONE,   2, FLAG_8041 | FLAG_8048 },
  { "jmpp",  0xa3, 0xff, 1, OP_AT_A,  OP_NONE,   2, FLAG_NS405 },
  { "jnc",   0xe6, 0xff, 1, OP_PADDR, OP_NONE,   2, 0 },
  { "jnf0",  0x86, 0xff, 1, OP_PADDR, OP_NONE,   2, FLAG_NS405 },
  { "jnf1",  0x66, 0xff, 1, OP_PADDR, OP_NONE,   2, FLAG_NS405 },
  { "jni",   0x86, 0xff, 1, OP_PADDR, OP_NONE,   2, FLAG_8048 },
  { "jnibf", 0xd6, 0xff, 1, OP_PADDR, OP_NONE,   2, FLAG_8041 },
  { "jnt0",  0x26, 0xff, 1, OP_PADDR, OP_NONE,   2, FLAG_8041 | FLAG_8048 },
  { "jnt1",  0x46, 0xff, 1, OP_PADDR, OP_NONE,   2, FLAG_8041 | FLAG_8048 },
  { "jntf",  0x06, 0xff, 1, OP_PADDR, OP_NONE,   2, FLAG_NS405 },
  { "jnxi",  0xa6, 0xff, 1, OP_PADDR, OP_NONE,   2, FLAG_NS405 },
  { "jnz",   0x96, 0xff, 1, OP_PADDR, OP_NONE,   2, FLAG_8041 | FLAG_8048 },
  { "jnz",   0xd6, 0xff, 1, OP_PADDR, OP_NONE,   2, FLAG_NS405 },
  { "jobf",  0x86, 0xff, 1, OP_PADDR, OP_NONE,   2, FLAG_8041 | FLAG_8048 },
  { "jtf",   0x16, 0xff, 1, OP_PADDR, OP_NONE,   2, 0 },
  { "jt0",   0x36, 0xff, 1, OP_PADDR, OP_NONE,   2, FLAG_8041 | FLAG_8048 },
  { "jt1",   0x56, 0xff, 1, OP_PADDR, OP_NONE,   2, FLAG_8041 | FLAG_8048 },
  { "jxi",   0xb6, 0xff, 1, OP_PADDR, OP_NONE,   2, FLAG_NS405 },
  { "jz",    0xc6, 0xff, 1, OP_PADDR, OP_NONE,   2, 0 },
  { "mov",   0x9b, 0xff, 2, OP_A,     OP_CURS,   1, FLAG_NS405 },
  { "mov",   0xe2, 0xff, 2, OP_A,     OP_HACC,   1, FLAG_NS405 },
  { "mov",   0x9a, 0xff, 2, OP_A,     OP_HOME,   1, FLAG_NS405 },
  { "mov",   0x3f, 0xff, 2, OP_A,     OP_HPEN,   1, FLAG_NS405 },
  { "mov",   0x8c, 0xff, 2, OP_A,     OP_INTR,   1, FLAG_NS405 },
  { "mov",   0x23, 0xff, 2, OP_A,     OP_NUM,    2, 0 },
  { "mov",   0xc7, 0xff, 2, OP_A,     OP_PSW,    1, 0 },
  { "mov",   0xf8, 0xf8, 2, OP_A,     OP_RR,     1, 0 },
  { "mov",   0x9c, 0xff, 2, OP_A,     OP_STAT,   1, FLAG_NS405 },
  { "mov",   0xf0, 0xfe, 2, OP_A,     OP_AT_R,   1, 0 },
  { "mov",   0x42, 0xff, 2, OP_A,     OP_T,      1, 0 },
  { "mov",   0x3e, 0xff, 2, OP_A,     OP_VPEN,   1, FLAG_NS405 },
  { "mov",   0x3c, 0xff, 2, OP_AL0,   OP_A,      1, FLAG_NS405 },
  { "mov",   0x3d, 0xff, 2, OP_AL1,   OP_A,      1, FLAG_NS405 },
  { "mov",   0x02, 0xff, 2, OP_BAUD,  OP_A,      1, FLAG_NS405 },
  { "mov",   0x0d, 0xff, 2, OP_BEGD,  OP_A,      1, FLAG_NS405 },
  { "mov",   0x8b, 0xff, 2, OP_CURS,  OP_A,      1, FLAG_NS405 },
  { "mov",   0x0c, 0xff, 2, OP_ENDD,  OP_A,      1, FLAG_NS405 },
  { "mov",   0xc2, 0xff, 2, OP_HACC,  OP_A,      1, FLAG_NS405 },
  { "mov",   0x8a, 0xff, 2, OP_HOME,  OP_A,      1, FLAG_NS405 },
  { "mov",   0x82, 0xff, 2, OP_MASK,  OP_A,      1, FLAG_NS405 },
  { "mov",   0x22, 0xff, 2, OP_PSR,   OP_A,      1, FLAG_NS405 },
  { "mov",   0xd7, 0xff, 2, OP_PSW,   OP_A,      1, 0 },
  { "mov",   0xa8, 0xf8, 2, OP_RR,    OP_A,      1, 0 },
  { "mov",   0xb8, 0xf8, 2, OP_RR,    OP_NUM,    2, 0 },
  { "mov",   0xa0, 0xfe, 2, OP_AT_R,  OP_A,      1, 0 },
  { "mov",   0xb0, 0xfe, 2, OP_AT_R,  OP_NUM,    2, 0 },
  { "mov",   0x55, 0xff, 2, OP_SCR,   OP_A,      1, FLAG_NS405 },
  { "mov",   0x0e, 0xff, 2, OP_SROW,  OP_A,      1, FLAG_NS405 },
  { "mov",   0x62, 0xff, 2, OP_T,     OP_A,      1, 0 },
  { "mov",   0x87, 0xff, 2, OP_TCP,   OP_A,      1, FLAG_NS405 },
  { "mov",   0xb7, 0xff, 2, OP_AT_TCP,OP_A,      1, FLAG_NS405 },
  { "mov",   0x01, 0xff, 2, OP_UCR,   OP_A,      1, FLAG_NS405 },
  { "mov",   0x33, 0xff, 2, OP_UMX,   OP_A,      1, FLAG_NS405 },
  { "mov",   0x45, 0xff, 2, OP_VCR,   OP_A,      1, FLAG_NS405 },
  { "mov",   0xa2, 0xff, 2, OP_VINT,  OP_A,      1, FLAG_NS405 },
  { "mov",   0x90, 0xff, 2, OP_STS,   OP_A,      1, FLAG_8041 },
  { "movd",  0x0c, 0xfc, 2, OP_A,     OP_PP,     2, 0 },
  { "movd",  0x3c, 0xfc, 2, OP_PP,    OP_A,      2, FLAG_8041 | FLAG_8048 },
  { "movl",  0x88, 0xfe, 2, OP_RR,    OP_A,      1, FLAG_NS405 },
  { "movl",  0x98, 0xfe, 2, OP_A,     OP_RR,     1, FLAG_NS405 },
  { "movp",  0xa3, 0xff, 2, OP_A,     OP_AT_A,   1, FLAG_8041 | FLAG_8048 },
  { "movp",  0xb3, 0xff, 2, OP_A,     OP_AT_A,   1, FLAG_NS405 },
  { "movp3", 0xe3, 0xff, 2, OP_A,     OP_AT_A,   2, FLAG_8041 | FLAG_8048 },
  { "movp3", 0xf3, 0xff, 2, OP_A,     OP_AT_A,   2, FLAG_NS405 },
  { "movx",  0x9d, 0xfe, 2, OP_A,     OP_AT_CURS,2, FLAG_NS405 },
  { "movx",  0x80, 0xfe, 2, OP_A,     OP_AT_R,   2, FLAG_8048 },
  { "movx",  0x90, 0xfe, 2, OP_A,     OP_AT_R,   2, FLAG_NS405 },
  { "movx",  0x90, 0xfe, 2, OP_AT_R,  OP_A,      2, FLAG_8048 },
  { "movx",  0x80, 0xfe, 2, OP_AT_R,  OP_A,      2, FLAG_NS405 },
  { "movx",  0x8d, 0xff, 2, OP_AT_CURS,OP_A,     2, FLAG_NS405 },
  { "nop",   0x00, 0xff, 0, OP_NONE,  OP_NONE,   1, 0 },
  { "orl",   0x48, 0xf8, 2, OP_A,     OP_RR,     1, 0 },
  { "orl",   0x40, 0xfe, 2, OP_A,     OP_AT_R,   1, 0 },
  { "orl",   0x43, 0xff, 2, OP_A,     OP_NUM,    2, 0 },
  { "orl",   0x63, 0xff, 2, OP_PORT,  OP_NUM,    2, FLAG_NS405 },
  { "orl",   0x88, 0xff, 2, OP_P12,   OP_NUM,    2, FLAG_8048 },
  { "orld",  0x8c, 0xfc, 2, OP_PP,    OP_A,      2, FLAG_8041 | FLAG_8048 },
  { "out",   0x02, 0xff, 2, OP_DBB,   OP_A,      2, FLAG_8041 },
  { "out",   0xc1, 0xff, 1, OP_PORT,  OP_NONE,   2, FLAG_NS405 },
  { "out",   0xc0, 0xff, 1, OP_XMTR,  OP_NONE,   2, FLAG_NS405 },
  { "outl",  0x38, 0xfc, 2, OP_P12,   OP_A,      2, 0 },
  { "outl",  0x02, 0xff, 2, OP_BUS,   OP_A,      2, 0 },
  { "ret",   0x83, 0xff, 0, OP_NONE,  OP_NONE,   2, 0 },
  { "retr",  0x93, 0xff, 0, OP_NONE,  OP_NONE,   2, 0 },
  { "rl",    0xe7, 0xff, 1, OP_A,     OP_NONE,   1, 0 },
  { "rlc",   0xf7, 0xff, 1, OP_A,     OP_NONE,   1, 0 },
  { "rr",    0x77, 0xff, 1, OP_A,     OP_NONE,   1, 0 },
  { "rrc",   0x67, 0xff, 1, OP_A,     OP_NONE,   1, 0 },
  { "sel",   0xe5, 0xff, 1, OP_MB0,   OP_NONE,   1, FLAG_8048 },
  { "sel",   0xf5, 0xff, 1, OP_MB1,   OP_NONE,   1, FLAG_8048 },
  { "sel",   0xc5, 0xff, 1, OP_MB0,   OP_NONE,   1, FLAG_NS405 },
  { "sel",   0xd5, 0xff, 1, OP_MB1,   OP_NONE,   1, FLAG_NS405 },
  { "sel",   0xe5, 0xff, 1, OP_MB2,   OP_NONE,   1, FLAG_NS405 },
  { "sel",   0xf5, 0xff, 1, OP_MB3,   OP_NONE,   1, FLAG_NS405 },
  { "sel",   0xc5, 0xff, 1, OP_RB0,   OP_NONE,   1, FLAG_8041 | FLAG_8048 },
  { "sel",   0xd5, 0xff, 1, OP_RB1,   OP_NONE,   1, FLAG_8041 | FLAG_8048 },
  { "sel",   0xc3, 0xff, 1, OP_RB0,   OP_NONE,   1, FLAG_NS405 },
  { "sel",   0xe3, 0xff, 1, OP_RB1,   OP_NONE,   1, FLAG_NS405 },
  { "stop",  0x65, 0xff, 1, OP_TCNT,  OP_NONE,   1, FLAG_8041 | FLAG_8048 },
  { "stop",  0x65, 0xff, 1, OP_T,     OP_NONE,   1, FLAG_NS405 },
  { "strt",  0x45, 0xff, 1, OP_CNT,   OP_NONE,   1, FLAG_8041 | FLAG_8048 },
  { "strt",  0x55, 0xff, 1, OP_T,     OP_NONE,   1, FLAG_8041 | FLAG_8048 },
  { "strt",  0x75, 0xff, 1, OP_T,     OP_NONE,   1, FLAG_NS405 },
  { "swap",  0x47, 0xff, 1, OP_A,     OP_NONE,   1, 0 },
  { "xch",   0x28, 0xf8, 2, OP_A,     OP_RR,     1, 0 },
  { "xch",   0x20, 0xfe, 2, OP_A,     OP_AT_R,   1, 0 },
  { "xchd",  0x30, 0xfe, 2, OP_A,     OP_AT_R,   1, 0 },
  { "xrl",   0xd8, 0xf8, 2, OP_A,     OP_RR,     1, 0 },
  { "xrl",   0xd0, 0xfe, 2, OP_A,     OP_AT_R,   1, 0 },
  { "xrl",   0xd3, 0xff, 2, OP_A,     OP_NUM,    2, 0 },
  { NULL,    0x00, 0x00, 0, OP_NONE,  OP_NONE,   0, 0 },
};

struct _const_operand_8048 const_operands_8048[] = {
  { "A",      OP_A },
  { "C",      OP_C },
  { "I",      OP_I },
  { "T",      OP_T },
  { "AL0",    OP_AL0 },
  { "AL1",    OP_AL1 },
  { "BAUD",   OP_BAUD },
  { "BEGD",   OP_BEGD },
  { "BUS",    OP_BUS },
  { "CLK",    OP_CLK },
  { "CNT",    OP_CNT },
  { "CURS",   OP_CURS },
  { "DBB",    OP_DBB },
  { "DMA",    OP_DMA },
  { "ENDD",   OP_ENDD },
  { "F0",     OP_F0 },
  { "F1",     OP_F1 },
  { "FLAGS",  OP_FLAGS },
  { "HACC",   OP_HACC },
  { "HOME",   OP_HOME },
  { "HPEN",   OP_HPEN },
  { "II",     OP_II },
  { "INTR",   OP_INTR },
  { "MASK",   OP_MASK },
  { "MB0",    OP_MB0 },
  { "MB1",    OP_MB1 },
  { "MB2",    OP_MB2 },
  { "MB3",    OP_MB3 },
  { "PORT",   OP_PORT },
  { "PSR",    OP_PSR },
  { "PSW",    OP_PSW },
  { "RCVR",   OP_RCVR },
  { "RB0",    OP_RB0 },
  { "RB1",    OP_RB1 },
  { "SCR",    OP_SCR },
  { "SROW",   OP_SROW },
  { "STAT",   OP_STAT },
  { "STS",    OP_STS },
  { "TCNT",   OP_TCNT },
  { "TCNTI",  OP_TCNTI },
  { "TCP",    OP_TCP },
  { "UCR",    OP_UCR },
  { "UMX",    OP_UMX },
  { "VCR",    OP_VCR },
  { "VINT",   OP_VINT },
  { "VPEN",   OP_VPEN },
  { "XI",     OP_XI },
  { "XMTR",   OP_XMTR },
  { NULL,     OP_NONE },
};
